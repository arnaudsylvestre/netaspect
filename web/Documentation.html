<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>NetAspect</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap-3.0.2/dist/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="jumbotron.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
<!-- Docs page layout -->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
		<div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Home</a>
        </div>
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">Net Aspect</a>
        </div>
		<div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="GettingStarted.html">Getting started</a>
        </div>
		<div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="Documentation.html">Documentation</a>
        </div>
      </div>
    </div>

<div class="container bs-docs-container">
      <div class="row">
        
        <div class="col-md-12" role="main">
            <!-- Glyphicons
  ================================================== -->
  <div class="bs-docs-section">
    <div class="page-header">
      <h1 id="attributes">The sample class</h1>
    </div>
    <p>Imagine that we want to log the different access on the following class : </p>
    <pre class="prettyprint">
public class MyInt
{
   int value;
   
   public MyInt(int value)
   {
      this.value = value;
   }
   
   public int Value
   {
      get { return value; }
   }
   
   public int DivideBy(int v)
   {
      return value / v;
   }
}
</pre>
  </div>


  <!-- Dropdowns
  ================================================== -->
  <div class="bs-docs-section">
    <div class="page-header">
      <h1 id="dropdowns">Method weaving</h1>
    </div>
    
	
    <h2 id="dropdowns-example">Setup</h2>
    <h3 id="dropdowns-example">Define the aspect</h3>
    <p>NetAspect use .Net attributes to define the weaving model. To define a NetAspect attribute you must declare your attribute with a property named <b>IsNetAspectAttribute</b> like this :</p>
	<pre class="prettyprint">
public class LogAttribute : Attribute
{
    public bool IsNetAspectAttribute { get { return true; } }
}
</pre>
<h3 id="dropdowns-example">Link the method with the aspect</h3>
    <p>Now, just add the attribute to the DivideBy method</p>
	<pre class="prettyprint">
public class MyInt
{
  private readonly int value;

  public MyInt(int value)
  {
	 this.value = value;
  }

  public int Value
  {
	 get { return value; }
  }

  [Log]
  public int DivideBy(int v)
  {
	 return value / v;
  }
}
</pre>
    <h2 id="dropdowns-example">Do something before the method is called</h2>
    <p>Imagine that we want to print "Start Division" in the console when someone calls the DivideBy method.</p>
	<h3 id="dropdowns-example">Modify the aspect</h3>
    <p>We must modify our aspect like this</p>
	<pre class="prettyprint">
public class LogAttribute : Attribute
{
    public bool IsNetAspectAttribute { get { return true; } }
	
    public void Before() { Console.WriteLine("Start Division"); }
}
</pre>
	
    <h3 id="dropdowns-example-after">Parameters</h3>
	<p>You can add some parameters to your Before method to get some information about the weaved method</p>	
	<ul>
		<li><b>instance</b> : the <i>this</i> of the weaved method (in our case the this of Divide). The type of instance can be <b>object</b> or <b>Computer</b> in our case</li>
		<li><b>method</b> : the MethodInfo of the weaved method (in our case Divide). The type of method must be <b>MethodInfo</b></li>
		<li><b>parameters</b> : the parameters of the weaved method (in our case the parameters of the Divide method). The type of parameters must be <b>object[]</b></li>
		<li><b>parameter name</b> : if a parameter name/type in the Before method is in the weaved method so the value will be the same. You can referenced the parameter in the aspect method to update the value in the weaved method</li>
	</ul>
	<p>Here is a sample with parameters</p>
	
	<pre class="prettyprint">
public class LogAttribute : Attribute
{
    public bool IsNetAspectAttribute { get { return true; } }
	
    public void Before(MyInt instance, int v) 
    {
        Console.WriteLine(string.Format("Start Division {0} / {1}", instance.Value, v));
    }
}
</pre>

<h2 id="dropdowns-example">Do something after the method is called</h2>
    <p>Imagine that we want to print "End of division" in the console when the division is done.</p>
	<h3 id="dropdowns-example">Modify the aspect</h3>
    <p>We must modify our aspect like this</p>
	<pre class="prettyprint">
public class LogAttribute : Attribute
{
    public bool IsNetAspectAttribute { get { return true; } }
	
    public void After() { Console.WriteLine("End of division"); }
}
</pre>
	
    <h3 id="dropdowns-example-after">Parameters</h3>
	<p>You can add some parameters to your After method to get some information about the weaved method</p>	
	<ul>
		<li><b>instance</b> : same as the Before method</li>
		<li><b>method</b> : same as the Before method</li>
		<li><b>parameters</b> : same as the Before method</li>
		<li><b>parameter name</b> : same as the Before method</li>
		<li><b>result</b> : the value returned by the weaved method. You can referenced the result in the aspect method to update the result value in the weaved method. The type of result must be the same type as the weaved method</li>
	</ul>
	<p>Here is a sample with parameters</p>
	
	<pre class="prettyprint">
public class LogAttribute : Attribute
{
    public bool IsNetAspectAttribute { get { return true; } }
	
    public void After(MyInt instance, int v, int result) 
    {
        Console.WriteLine(string.Format("End of Division {0} / {1}. Result : {2}", instance.Value, v, result));
    }
}
</pre>

<h2 id="dropdowns-example">Do something when an exception is raised in the method</h2>
    <p>Imagine that we want to print "Exception" in the console when the division raises an exception.</p>
	<h3 id="dropdowns-example">Modify the aspect</h3>
    <p>We must modify our aspect like this</p>
	<pre class="prettyprint">
public class LogAttribute : Attribute
{
    public bool IsNetAspectAttribute { get { return true; } }
	
    public void OnException() { Console.WriteLine("Exception"); }
}
</pre>
	
    <h3 id="dropdowns-example-after">Parameters</h3>
	<p>You can add some parameters to your OnException method to get some information about the weaved method</p>	
	<ul>
		<li><b>instance</b> : same as the Before method</li>
		<li><b>method</b> : same as the Before method</li>
		<li><b>parameters</b> : same as the Before method</li>
		<li><b>parameter name</b> : same as the Before method</li>
		<li><b>exception</b> : the exception raised in the weaved.</li>
	</ul>
	<p>Here is a sample with parameters</p>
	
	<pre class="prettyprint">
public class LogAttribute : Attribute
{
    public bool IsNetAspectAttribute { get { return true; } }
	
    public void OnException(Exception exception) 
    {
         Console.WriteLine("Exception : {0}", exception.Message);
    }
}
</pre>


	 <!-- Dropdowns
  ================================================== -->
  <div class="bs-docs-section">
    <div class="page-header">
      <h1 id="dropdowns">Call weaving</h1>
    </div>
    <p>The "call weaving" add aspects to the method which call our method and/or field so, you can access to the caller information</p>
	
    <h2 id="dropdowns-example">Setup</h2>
    <p>To define a NetAspect call attribute you must declare your attribute with a field named <b>NetAspectAttributeKind</b> like this :</p>
	<pre class="prettyprint">
public class LogOnCallAttribute : Attribute
{
    string NetAspectAttributeKind = "Call";
}
</pre>
<h3 id="dropdowns-example">The caller class</h3>
<pre class="prettyprint">
public class Math
{
  public int Divide(int dividend, int divisor)
  {
	 var myInt = new MyInt(dividend);
	 return myInt.DivideBy(divisor);
  }
}
</pre>
<h3 id="dropdowns-example">Link the method with the aspect</h3>
    <p>Now, just add the attribute to the member you wish.</p>
	<pre class="prettyprint">
public class MyInt
{
  private readonly int value;

  public MyInt(int value)
  {
	 this.value = value;
  }

  public int Value
  {
	 get { return value; }
  }

  [LogOnCall]
  public int DivideBy(int v)
  {
	 return value / v;
  }
}
</pre>
    
    <h2 id="dropdowns-example">Do something before the method is called</h2>
    <p>Imagine that we want to print in the console the type name of each caller to the DivideBy method.</p>
	<h3 id="dropdowns-example">Modify the aspect</h3>
    <p>We must modify our aspect like this</p>
	<pre class="prettyprint">
public class LogOnCallAttribute : Attribute
{
    string NetAspectAttributeKind = "Call";
	
    public void BeforeCall(object caller) { Console.WriteLine("Start Division by {0}", caller.GetType().Name); }
}
</pre>
	
    <h3 id="dropdowns-example-after">Parameters</h3>
	<p>You can add some parameters to your BeforeCall method to get some information.</p>	
	<ul>
		<li><b>caller</b> : the <i>this</i> of the caller. The type of instance can be <b>object</b> or the type of the caller</li>
		<li><b>TODO</b></li>
	</ul>
	
</div>
    
	
	
	<div class="bs-docs-section">
    <div class="page-header">
      <h1 id="dropdowns">Additional features</h1>
    </div>
    
    <h2 id="dropdowns-example">Scopes</h2>
	<p>TODO</p>
    <h2 id="dropdowns-example">Aspect lifecycle</h2>
    <p>TODO</p>
    
</div>
	
	
	  
	  </div>

    </div>



    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="bootstrap-3.0.2/dist/js/bootstrap.min.js"></script>
	<script src="google-code-prettify/run_prettify.js"></script>
  </body>
</html>
